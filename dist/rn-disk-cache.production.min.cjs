"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("path"),o=require("react-native-fs");const a=e.join(o.DocumentDirectoryPath,"__caches__");exports.fromDiskCache=async(t,n,s=3600)=>{const c=e.join(a,t);await o.mkdir(c);const i=await o.readDir(c),r=i.sort()[i.length-1],l=r?Number(r.name):0,u=async()=>{console.log("Writing new cache value.");const a=await n(),t=Date.now(),s=e.join(c,`${t}`),r=JSON.stringify(a);console.log("Deleting existing caches.");for(const e of i)o.unlink(e.path);return await o.writeFile(s,r),a};if(!i.length)return console.log("No caches found."),await u();const h=(Date.now()-l)/1e3,g=h>=s;return console.log(`Caches found for store: ${t}`,{cacheIsStale:g,secondsOld:h}),g?(console.log("Cache is stale."),await u()):(console.log("Cache is not stale."),await(async()=>{console.log("Reading most recent cache value.");const a=e.join(c,r.name);return JSON.parse(await o.readFile(a))})())};
//# sourceMappingURL=rn-disk-cache.production.min.cjs.map
